<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K.R.O Cleaning Service - Price Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="config.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        header h1 { font-size: 2.5em; margin-bottom: 10px; }
        header h1 i { margin-right: 10px; }
        .form-section { padding: 30px; border-bottom: 1px solid #eee; }
        .form-section h2 { color: #333; margin-bottom: 20px; }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .form-group { margin-bottom: 15px; }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        .radio-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .radio-option {
            flex: 1;
            min-width: 200px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
        }
        .radio-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        .radio-option i {
            font-size: 24px;
            color: #667eea;
            margin-right: 10px;
        }
        .package-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .package-option {
            position: relative;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
        }
        .package-option:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102,126,234,0.1);
        }
        .package-option input[type="radio"] {
            position: absolute;
            top: 20px;
            right: 20px;
        }
        .package-details h3 { color: #333; margin-bottom: 10px; }
        .package-details .price {
            color: #667eea;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .package-details ul {
            list-style: none;
            padding: 0;
        }
        .package-details ul li {
            color: #777;
            margin-bottom: 5px;
            padding-left: 20px;
            position: relative;
        }
        .package-details ul li:before {
            content: "✓";
            color: #667eea;
            position: absolute;
            left: 0;
        }
        .addons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .addon-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
        }
        .addon-item:hover { background: #f8f9ff; }
        .addon-item .addon-name { flex: 1; color: #555; }
        .addon-item .addon-price { color: #667eea; font-weight: bold; margin-right: 5px; }
        .price-section {
            padding: 30px;
            background: #f8f9ff;
            text-align: center;
        }
        .price-box {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: inline-block;
        }
        #totalPrice {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
        }
        .price-breakdown {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            text-align: left;
            max-width: 500px;
            margin: 20px auto 0;
        }
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .breakdown-item.total {
            font-weight: bold;
            font-size: 1.2em;
            border-top: 2px solid #f0f0f0;
            margin-top: 10px;
            padding-top: 15px;
        }
        .submit-btn {
            display: block;
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
        }
        .submit-btn:hover { opacity: 0.9; }
        .loading-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .loading-spinner { text-align: center; }
        .loading-spinner i {
            font-size: 50px;
            color: #667eea;
            margin-bottom: 20px;
        }
        .success-message {
            background: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
        }
        .error-message {
            color: #ff6b6b;
            font-size: 0.85em;
            margin-top: 5px;
            display: none;
        }
        @media (max-width: 768px) {
            header h1 { font-size: 1.8em; }
            .form-section { padding: 20px; }
            .package-grid { grid-template-columns: 1fr; }
            #totalPrice { font-size: 2em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-broom"></i> K.R.O Cleaning Service</h1>
            <p>Get an instant price quote for your cleaning needs</p>
        </header>

        <form id="pricingForm">
            <div class="form-section">
                <h2>Your Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="fullName">Full Name *</label>
                        <input type="text" id="fullName" required>
                        <div class="error-message" id="nameError">Please enter your full name</div>
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" required>
                        <div class="error-message" id="emailError">Please enter a valid email</div>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" required>
                        <div class="error-message" id="phoneError">Please enter your phone number</div>
                    </div>
                    <div class="form-group">
                        <label for="address">Property Address *</label>
                        <input type="text" id="address" required>
                        <div class="error-message" id="addressError">Please enter the property address</div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h2>Property Type</h2>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="propertyType" value="residential" checked> 
                        <i class="fas fa-home"></i> Residential
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="propertyType" value="commercial"> 
                        <i class="fas fa-building"></i> Commercial
                    </label>
                </div>
            </div>

            <div class="form-section" id="residentialPackages">
                <h2>Select Residential Package</h2>
                <div class="package-grid">
                    <label class="package-option">
                        <input type="radio" name="residentialPackage" value="standard" checked>
                        <div class="package-details">
                            <h3>Standard Cleaning</h3>
                            <p class="price">Starting at ₦9,000</p>
                            <ul><li>Bedrooms, bathrooms, kitchen included</li></ul>
                        </div>
                    </label>
                    <label class="package-option">
                        <input type="radio" name="residentialPackage" value="deep">
                        <div class="package-details">
                            <h3>Deep Cleaning</h3>
                            <p class="price">Starting at ₦41,400</p>
                            <ul><li>Thorough, in-depth cleaning</li></ul>
                        </div>
                    </label>
                    <label class="package-option">
                        <input type="radio" name="residentialPackage" value="movein">
                        <div class="package-details">
                            <h3>Move-In Cleaning</h3>
                            <p class="price">Starting at ₦51,000</p>
                            <ul><li>For your new home</li></ul>
                        </div>
                    </label>
                </div>
            </div>

            <div class="form-section" id="commercialPackages" style="display: none;">
                <h2>Select Commercial Package</h2>
                <div class="package-grid">
                    <label class="package-option">
                        <input type="radio" name="commercialPackage" value="small" checked>
                        <div class="package-details">
                            <h3>Small Office</h3>
                            <p class="price">Starting at ₦45,000</p>
                        </div>
                    </label>
                    <label class="package-option">
                        <input type="radio" name="commercialPackage" value="standard">
                        <div class="package-details">
                            <h3>Standard Office</h3>
                            <p class="price">Starting at ₦96,000</p>
                        </div>
                    </label>
                    <label class="package-option">
                        <input type="radio" name="commercialPackage" value="large">
                        <div class="package-details">
                            <h3>Large Office</h3>
                            <p class="price">Starting at ₦150,000</p>
                        </div>
                    </label>
                    <label class="package-option">
                        <input type="radio" name="commercialPackage" value="onetime">
                        <div class="package-details">
                            <h3>One-Time Deep Clean</h3>
                            <p class="price">Starting at ₦249,000</p>
                        </div>
                    </label>
                </div>
            </div>

            <div class="form-section">
                <h2>Cleaning Frequency</h2>
                <select id="frequency">
                    <option value="onetime">One Time (No discount)</option>
                    <option value="twicemonth">Twice a month (3% off)</option>
                    <option value="onceweek">Once a week (5% off)</option>
                    <option value="twiceweek">2x a week (7% off)</option>
                    <option value="threeweek">3x a week (8% off)</option>
                    <option value="fiveweek">5x a week (10% off)</option>
                    <option value="everyday">Everyday (16% off)</option>
                </select>
            </div>

            <div class="form-section" id="residentialDetails">
                <h2>Room Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="bedrooms">Bedrooms:</label>
                        <input type="number" id="bedrooms" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="bathrooms">Bathrooms:</label>
                        <input type="number" id="bathrooms" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="livingrooms">Living Rooms:</label>
                        <input type="number" id="livingrooms" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="kitchens">Kitchens:</label>
                        <input type="number" id="kitchens" min="0" value="0">
                    </div>
                </div>
            </div>

            <div class="form-section" id="commercialDetails" style="display: none;">
                <h2>Commercial Space Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="offices">Offices:</label>
                        <input type="number" id="offices" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="restrooms">Restrooms:</label>
                        <input type="number" id="restrooms" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="reception">Reception:</label>
                        <select id="reception">
                            <option value="0">No</option>
                            <option value="1">Yes</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h2>Additional Services</h2>
                <div class="addons-grid" id="addonsContainer"></div>
            </div>

            <div class="form-section">
                <h2>Additional Requirements</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="additionalCleaners">Additional Cleaners:</label>
                        <input type="number" id="additionalCleaners" min="0" value="0">
                    </div>
                </div>
            </div>

            <div class="price-section">
                <h2>Estimated Price</h2>
                <div class="price-box">
                    <span id="totalPrice">₦0</span>
                </div>
                <div class="price-breakdown" id="priceBreakdown"></div>
            </div>

            <div class="success-message" id="successMessage">
                <i class="fas fa-check-circle"></i> Quote submitted successfully! We'll contact you shortly.
            </div>

            <button type="button" id="submitBtn" class="submit-btn">
                <i class="fas fa-paper-plane"></i> Get Quote & Submit
            </button>
        </form>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <h3>Submitting your quote...</h3>
        </div>
    </div>

    <script>
        const CONFIG = window.KRO_CONFIG || {
            GOOGLE_SCRIPT_URL: 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE',
            API_SECRET_TOKEN: 'dev-mode-token',
            CURRENCY: '₦',
            ENABLE_GOOGLE_SHEETS: true,
            COMPANY_PHONE: '+234 704 918 9964'
        };

        const pricing = {
            residential: {
                standard: { base: 9000, rooms: { bedroom: 1300, bathroom: 1000, living: 1200, kitchen: 1500 } },
                deep: { base: 41400, rooms: { bedroom: 4400, bathroom: 4100, living: 4200, kitchen: 4600 } },
                movein: { base: 51000, rooms: { bedroom: 5000, bathroom: 4800, living: 5000, kitchen: 5200 } }
            },
            commercial: {
                small: { base: 45000, rooms: { office: 10000, restroom: 19000, reception: 16000 } },
                standard: { base: 96000, rooms: { office: 27000, restroom: 36000, reception: 33000 } },
                large: { base: 150000, rooms: { office: 45000, restroom: 54000, reception: 51000 } },
                onetime: { base: 249000, rooms: { office: 78000, restroom: 87000, reception: 84000 } }
            }
        };

        const addons = {
            residential: [
                { name: "Balcony Cleaning", price: 1000 },
                { name: "Window Cleaning", price: 1400 },
                { name: "Fridge Cleaning", price: 700 },
                { name: "Fan Cleaning", price: 700 },
                { name: "Oven Cleaning", price: 700 }
            ],
            commercial: [
                { name: "Kitchenette", price: 5000 },
                { name: "Canteen", price: 14500 },
                { name: "Lounge", price: 10000 },
                { name: "Window Cleaning", price: 4500 },
                { name: "Wall Cleaning", price: 9500 }
            ]
        };

        const frequencyDiscounts = {
            onetime: 0, twicemonth: 3, onceweek: 5, twiceweek: 7, threeweek: 8, fiveweek: 10, everyday: 16
        };

        const additionalCleanerCost = {
            residential: 5000,
            commercial: { small: 10000, standard: 22500, large: 35000, onetime: 40000 }
        };

        // DOM Elements
        const propertyTypeRadios = document.querySelectorAll('input[name="propertyType"]');
        const residentialPackages = document.getElementById('residentialPackages');
        const commercialPackages = document.getElementById('commercialPackages');
        const residentialDetails = document.getElementById('residentialDetails');
        const commercialDetails = document.getElementById('commercialDetails');
        const addonsContainer = document.getElementById('addonsContainer');
        const frequencySelect = document.getElementById('frequency');
        const totalPriceSpan = document.getElementById('totalPrice');
        const priceBreakdown = document.getElementById('priceBreakdown');
        const submitBtn = document.getElementById('submitBtn');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const successMessage = document.getElementById('successMessage');

        let currentPropertyType = 'residential';
        let currentResidentialPackage = 'standard';
        let currentCommercialPackage = 'small';

        document.addEventListener('DOMContentLoaded', function() {
            updateAddons();
            calculatePrice();
            setupEventListeners();
        });

        function setupEventListeners() {
            propertyTypeRadios.forEach(radio => {
                radio.addEventListener('change', function(e) {
                    currentPropertyType = e.target.value;
                    if (currentPropertyType === 'residential') {
                        residentialPackages.style.display = 'block';
                        commercialPackages.style.display = 'none';
                        residentialDetails.style.display = 'block';
                        commercialDetails.style.display = 'none';
                    } else {
                        residentialPackages.style.display = 'none';
                        commercialPackages.style.display = 'block';
                        residentialDetails.style.display = 'none';
                        commercialDetails.style.display = 'block';
                    }
                    updateAddons();
                    calculatePrice();
                });
            });

            document.querySelectorAll('input[name="residentialPackage"]').forEach(radio => {
                radio.addEventListener('change', function(e) {
                    currentResidentialPackage = e.target.value;
                    calculatePrice();
                });
            });

            document.querySelectorAll('input[name="commercialPackage"]').forEach(radio => {
                radio.addEventListener('change', function(e) {
                    currentCommercialPackage = e.target.value;
                    calculatePrice();
                });
            });

            const inputs = ['bedrooms', 'bathrooms', 'livingrooms', 'kitchens', 'offices', 'restrooms', 'reception', 'additionalCleaners'];
            inputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.addEventListener('input', calculatePrice);
            });

            frequencySelect.addEventListener('change', calculatePrice);
            submitBtn.addEventListener('click', submitForm);
        }

        function updateAddons() {
            const addonsList = currentPropertyType === 'residential' ? addons.residential : addons.commercial;
            let html = '';
            addonsList.forEach((addon) => {
                html += `
                    <label class="addon-item">
                        <input type="checkbox" class="addon-checkbox" data-price="${addon.price}" data-name="${addon.name}">
                        <span class="addon-name">${addon.name}</span>
                        <span class="addon-price">${CONFIG.CURRENCY}${addon.price.toLocaleString()}</span>
                    </label>
                `;
            });
            addonsContainer.innerHTML = html;
            document.querySelectorAll('.addon-checkbox').forEach(cb => cb.addEventListener('change', calculatePrice));
        }

        function calculatePrice() {
            let basePrice = 0, roomCosts = 0, breakdown = [];
            
            if (currentPropertyType === 'residential') {
                const pkg = pricing.residential[currentResidentialPackage];
                basePrice = pkg.base;
                const bedrooms = parseInt(document.getElementById('bedrooms')?.value) || 0;
                const bathrooms = parseInt(document.getElementById('bathrooms')?.value) || 0;
                const livingrooms = parseInt(document.getElementById('livingrooms')?.value) || 0;
                const kitchens = parseInt(document.getElementById('kitchens')?.value) || 0;
                
                roomCosts = (bedrooms * pkg.rooms.bedroom) + (bathrooms * pkg.rooms.bathroom) +
                           (livingrooms * pkg.rooms.living) + (kitchens * pkg.rooms.kitchen);
                
                if (bedrooms > 0) breakdown.push({ item: `Bedrooms (${bedrooms})`, cost: bedrooms * pkg.rooms.bedroom });
                if (bathrooms > 0) breakdown.push({ item: `Bathrooms (${bathrooms})`, cost: bathrooms * pkg.rooms.bathroom });
            } else {
                const pkg = pricing.commercial[currentCommercialPackage];
                basePrice = pkg.base;
                const offices = parseInt(document.getElementById('offices')?.value) || 0;
                const restrooms = parseInt(document.getElementById('restrooms')?.value) || 0;
                const reception = parseInt(document.getElementById('reception')?.value) || 0;
                
                roomCosts = (offices * pkg.rooms.office) + (restrooms * pkg.rooms.restroom) + (reception * (pkg.rooms.reception || 0));
                
                if (offices > 0) breakdown.push({ item: `Offices (${offices})`, cost: offices * pkg.rooms.office });
                if (restrooms > 0) breakdown.push({ item: `Restrooms (${restrooms})`, cost: restrooms * pkg.rooms.restroom });
                if (reception > 0) breakdown.push({ item: 'Reception', cost: pkg.rooms.reception });
            }
            
            let addonsTotal = 0;
            document.querySelectorAll('.addon-checkbox:checked').forEach(cb => {
                addonsTotal += parseFloat(cb.dataset.price);
                breakdown.push({ item: cb.dataset.name, cost: parseFloat(cb.dataset.price) });
            });
            
            const additionalCleaners = parseInt(document.getElementById('additionalCleaners')?.value) || 0;
            let cleanerCost = 0;
            if (additionalCleaners > 0) {
                if (currentPropertyType === 'residential') cleanerCost = additionalCleaners * 5000;
                else cleanerCost = additionalCleaners * additionalCleanerCost.commercial[currentCommercialPackage];
                breakdown.push({ item: `Additional Cleaners (${additionalCleaners})`, cost: cleanerCost });
            }
            
            let subtotal = basePrice + roomCosts + addonsTotal + cleanerCost;
            breakdown.push({ item: 'Package Base', cost: basePrice });
            
            const discountPercent = frequencyDiscounts[frequencySelect.value];
            const discountAmount = (subtotal * discountPercent) / 100;
            const total = subtotal - discountAmount;
            
            if (discountPercent > 0) breakdown.push({ item: `Discount (${discountPercent}%)`, cost: -discountAmount });
            
            totalPriceSpan.textContent = `${CONFIG.CURRENCY}${Math.round(total).toLocaleString()}`;
            
            let breakdownHtml = '<h3>Price Breakdown</h3>';
            breakdown.forEach(item => {
                breakdownHtml += `<div class="breakdown-item"><span>${item.item}</span><span>${CONFIG.CURRENCY}${Math.abs(item.cost).toLocaleString()}${item.cost < 0 ? ' discount' : ''}</span></div>`;
            });
            breakdownHtml += `<div class="breakdown-item total"><span>Total</span><span>${CONFIG.CURRENCY}${Math.round(total).toLocaleString()}</span></div>`;
            priceBreakdown.innerHTML = breakdownHtml;
            
            return total;
        }

        function validateForm() {
            let isValid = true;
            document.querySelectorAll('.error-message').forEach(msg => msg.style.display = 'none');
            
            if (!document.getElementById('fullName').value.trim()) {
                document.getElementById('nameError').style.display = 'block';
                isValid = false;
            }
            const email = document.getElementById('email').value.trim();
            if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                document.getElementById('emailError').style.display = 'block';
                isValid = false;
            }
            if (!document.getElementById('phone').value.trim()) {
                document.getElementById('phoneError').style.display = 'block';
                isValid = false;
            }
            if (!document.getElementById('address').value.trim()) {
                document.getElementById('addressError').style.display = 'block';
                isValid = false;
            }
            return isValid;
        }

        function submitForm() {
            if (!validateForm()) return;
            
            loadingOverlay.style.display = 'flex';
            const total = calculatePrice();
            
            const selectedAddons = [];
            document.querySelectorAll('.addon-checkbox:checked').forEach(cb => selectedAddons.push(cb.dataset.name));
            
            const formData = new URLSearchParams({
                secretToken: CONFIG.API_SECRET_TOKEN,
                fullName: document.getElementById('fullName').value.trim(),
                email: document.getElementById('email').value.trim(),
                phone: document.getElementById('phone').value.trim(),
                address: document.getElementById('address').value.trim(),
                propertyType: currentPropertyType === 'residential' ? 'Residential' : 'Commercial',
                package: currentPropertyType === 'residential' ? 
                    (currentResidentialPackage === 'standard' ? 'Standard Cleaning' : 
                     currentResidentialPackage === 'deep' ? 'Deep Cleaning' : 'Move-In Cleaning') :
                    (currentCommercialPackage === 'small' ? 'Small Office' :
                     currentCommercialPackage === 'standard' ? 'Standard Office' :
                     currentCommercialPackage === 'large' ? 'Large Office' : 'One-Time Deep Clean'),
                frequency: frequencySelect.options[frequencySelect.selectedIndex].text,
                rooms: currentPropertyType === 'residential' ?
                    `Bed:${document.getElementById('bedrooms').value}, Bath:${document.getElementById('bathrooms').value}, Living:${document.getElementById('livingrooms').value}, Kitchen:${document.getElementById('kitchens').value}` :
                    `Offices:${document.getElementById('offices').value}, Restrooms:${document.getElementById('restrooms').value}, Reception:${document.getElementById('reception').value === '1' ? 'Yes' : 'No'}`,
                addons: selectedAddons.join(', ') || 'None',
                additionalCleaners: document.getElementById('additionalCleaners').value || '0',
                totalAmount: `${CONFIG.CURRENCY}${Math.round(total).toLocaleString()}`
            });

            const script = document.createElement('script');
            const callbackName = 'jsonpCallback_' + Date.now();
            
            window[callbackName] = function(response) {
                delete window[callbackName];
                document.body.removeChild(script);
                loadingOverlay.style.display = 'none';
                if (response && response.result === 'success') {
                    successMessage.style.display = 'block';
                    setTimeout(() => successMessage.style.display = 'none', 3000);
                } else {
                    alert('Error submitting quote. Please call ' + CONFIG.COMPANY_PHONE);
                }
            };
            
            script.src = CONFIG.GOOGLE_SCRIPT_URL + '?callback=' + callbackName + '&' + formData.toString();
            script.onerror = function() {
                loadingOverlay.style.display = 'none';
                alert('Error submitting. Please call ' + CONFIG.COMPANY_PHONE);
            };
            document.body.appendChild(script);
        }
    </script>
</body>
</html>