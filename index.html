<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K.R.O Cleaning Service - Price Calculator</title>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header h1 i {
            margin-right: 10px;
        }

        .form-section {
            padding: 30px;
            border-bottom: 1px solid #eee;
        }

        .form-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .radio-option {
            flex: 1;
            min-width: 200px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .radio-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .radio-option input[type="radio"] {
            margin-right: 10px;
        }

        .radio-option i {
            font-size: 24px;
            color: #667eea;
            margin-right: 10px;
        }

        .package-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .package-option {
            position: relative;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .package-option:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.1);
        }

        .package-option input[type="radio"] {
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .package-details h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .package-details .price {
            color: #667eea;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .package-details .description {
            color: #666;
            margin-bottom: 15px;
        }

        .package-details ul {
            list-style: none;
            padding: 0;
        }

        .package-details ul li {
            color: #777;
            margin-bottom: 5px;
            font-size: 0.9em;
            padding-left: 20px;
            position: relative;
        }

        .package-details ul li:before {
            content: "✓";
            color: #667eea;
            position: absolute;
            left: 0;
        }

        .addons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .addon-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
        }

        .addon-item:hover {
            background: #f8f9ff;
        }

        .addon-item input[type="checkbox"] {
            margin-right: 10px;
        }

        .addon-item .addon-name {
            flex: 1;
            color: #555;
        }

        .addon-item .addon-price {
            color: #667eea;
            font-weight: bold;
            margin-right: 5px;
        }

        .addon-item small {
            color: #999;
            font-size: 0.8em;
        }

        .price-section {
            padding: 30px;
            background: #f8f9ff;
            text-align: center;
        }

        .price-box {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: inline-block;
        }

        #totalPrice {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
        }

        .price-breakdown {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            text-align: left;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .price-breakdown h3 {
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .breakdown-item.total {
            font-weight: bold;
            font-size: 1.2em;
            color: #333;
            border-bottom: none;
            margin-top: 10px;
            padding-top: 15px;
            border-top: 2px solid #f0f0f0;
        }

        .submit-btn {
            display: block;
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .submit-btn:hover {
            opacity: 0.9;
        }

        .submit-btn i {
            margin-right: 10px;
        }

        /* Loading overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading-spinner {
            text-align: center;
        }

        .loading-spinner i {
            font-size: 50px;
            color: #667eea;
            margin-bottom: 20px;
        }

        /* Success message */
        .success-message {
            background: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
        }

        .success-message i {
            margin-right: 10px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }
            
            .form-section {
                padding: 20px;
            }
            
            .package-grid {
                grid-template-columns: 1fr;
            }
            
            #totalPrice {
                font-size: 2em;
            }
            
            .radio-option {
                min-width: 100%;
            }
        }

        /* Thank You Page Styles */
        .thank-you-container {
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .thank-you-box {
            text-align: center;
            padding: 60px;
        }

        .success-icon {
            font-size: 80px;
            color: #4CAF50;
            margin-bottom: 20px;
        }

        .quote-summary {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            margin: 30px 0;
            text-align: left;
        }

        .quote-summary h3 {
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .quote-summary p {
            margin: 10px 0;
            color: #555;
        }

        .quote-summary strong {
            color: #333;
        }

        .back-btn {
            display: inline-block;
            padding: 15px 30px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .back-btn:hover {
            background: #764ba2;
        }

        /* Form validation styles */
        input:invalid {
            border-color: #ff6b6b;
        }

        .error-message {
            color: #ff6b6b;
            font-size: 0.85em;
            margin-top: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-broom"></i> K.R.O Cleaning Service</h1>
            <p>Get an instant price quote for your cleaning needs</p>
        </header>

        <form id="pricingForm">
            <!-- Personal Details Section -->
            <div class="form-section">
                <h2>Your Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="fullName">Full Name *</label>
                        <input type="text" id="fullName" name="fullName" required>
                        <div class="error-message" id="nameError">Please enter your full name</div>
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" name="email" required>
                        <div class="error-message" id="emailError">Please enter a valid email</div>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" name="phone" required>
                        <div class="error-message" id="phoneError">Please enter your phone number</div>
                    </div>
                    <div class="form-group">
                        <label for="address">Property Address *</label>
                        <input type="text" id="address" name="address" required>
                        <div class="error-message" id="addressError">Please enter the property address</div>
                    </div>
                </div>
            </div>

            <!-- Property Type Selection -->
            <div class="form-section">
                <h2>Property Type</h2>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="propertyType" value="residential" checked> 
                        <i class="fas fa-home"></i> Residential
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="propertyType" value="commercial"> 
                        <i class="fas fa-building"></i> Commercial
                    </label>
                </div>
            </div>

            <!-- Package Selection - Residential -->
            <div class="form-section" id="residentialPackages">
                <h2>Select Residential Package</h2>
                <div class="package-grid">
                    <label class="package-option">
                        <input type="radio" name="residentialPackage" value="standard" checked>
                        <div class="package-details">
                            <h3>Standard Cleaning</h3>
                            <p class="price">Starting at ₦9,000</p>
                            <p class="description">Regular maintenance cleaning for your home</p>
                            <ul>
                                <li>Bedrooms, bathrooms, kitchen included</li>
                                <li>1-3 cleaners</li>
                                <li>3-14 hours</li>
                            </ul>
                        </div>
                    </label>
                    <label class="package-option">
                        <input type="radio" name="residentialPackage" value="deep">
                        <div class="package-details">
                            <h3>Deep Cleaning</h3>
                            <p class="price">Starting at ₦41,400</p>
                            <p class="description">Thorough, in-depth cleaning</p>
                            <ul>
                                <li>Everything in standard, plus deep scrub</li>
                                <li>More intensive cleaning</li>
                                <li>Perfect for spring cleaning</li>
                            </ul>
                        </div>
                    </label>
                    <label class="package-option">
                        <input type="radio" name="residentialPackage" value="movein">
                        <div class="package-details">
                            <h3>Move-In Cleaning</h3>
                            <p class="price">Starting at ₦51,000</p>
                            <p class="description">For your new home</p>
                            <ul>
                                <li>Comprehensive pre-move cleaning</li>
                                <li>All rooms thoroughly cleaned</li>
                                <li>Ready for your belongings</li>
                            </ul>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Package Selection - Commercial -->
            <div class="form-section" id="commercialPackages" style="display: none;">
                <h2>Select Commercial Package</h2>
                <div class="package-grid">
                    <label class="package-option">
                        <input type="radio" name="commercialPackage" value="small" checked>
                        <div class="package-details">
                            <h3>Small Office</h3>
                            <p class="price">Starting at ₦45,000</p>
                            <p class="description">For startups, clinics, small offices</p>
                            <ul>
                                <li>1-3 offices + reception + restroom</li>
                                <li>1-2 cleaners</li>
                                <li>3-14 hours</li>
                            </ul>
                        </div>
                    </label>
                    <label class="package-option">
                        <input type="radio" name="commercialPackage" value="standard">
                        <div class="package-details">
                            <h3>Standard Office</h3>
                            <p class="price">Starting at ₦96,000</p>
                            <p class="description">For corporate offices, law firms</p>
                            <ul>
                                <li>4-8 offices + reception + toilets</li>
                                <li>2-3 cleaners</li>
                                <li>3-14 hours</li>
                            </ul>
                        </div>
                    </label>
                    <label class="package-option">
                        <input type="radio" name="commercialPackage" value="large">
                        <div class="package-details">
                            <h3>Large Office</h3>
                            <p class="price">Starting at ₦150,000</p>
                            <p class="description">For banks, ministries, hospitals</p>
                            <ul>
                                <li>9-20+ offices, halls & corridors</li>
                                <li>4-6 cleaners</li>
                                <li>3-14 hours</li>
                            </ul>
                        </div>
                    </label>
                    <label class="package-option">
                        <input type="radio" name="commercialPackage" value="onetime">
                        <div class="package-details">
                            <h3>One-Time Deep Clean</h3>
                            <p class="price">Starting at ₦249,000</p>
                            <p class="description">End-of-year, post-renovation</p>
                            <ul>
                                <li>Comprehensive deep cleaning</li>
                                <li>4-8 cleaners</li>
                                <li>3-14 hours</li>
                            </ul>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Frequency Selection -->
            <div class="form-section">
                <h2>Cleaning Frequency</h2>
                <select id="frequency" name="frequency">
                    <option value="onetime">One Time (No discount)</option>
                    <option value="twicemonth">Twice a month (3% off)</option>
                    <option value="onceweek">Once a week (5% off)</option>
                    <option value="twiceweek">2x a week (7% off)</option>
                    <option value="threeweek">3x a week (8% off)</option>
                    <option value="fiveweek">5x a week (10% off)</option>
                    <option value="everyday">Everyday (16% off)</option>
                </select>
            </div>

            <!-- Room Details - Residential -->
            <div class="form-section" id="residentialDetails">
                <h2>Room Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="bedrooms">Number of Bedrooms:</label>
                        <input type="number" id="bedrooms" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="bathrooms">Number of Bathrooms:</label>
                        <input type="number" id="bathrooms" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="livingrooms">Living Rooms:</label>
                        <input type="number" id="livingrooms" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="kitchens">Kitchens:</label>
                        <input type="number" id="kitchens" min="0" value="0">
                    </div>
                </div>
            </div>

            <!-- Room Details - Commercial -->
            <div class="form-section" id="commercialDetails" style="display: none;">
                <h2>Commercial Space Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="offices">Number of Offices:</label>
                        <input type="number" id="offices" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="restrooms">Number of Restrooms:</label>
                        <input type="number" id="restrooms" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="reception">Reception Area:</label>
                        <select id="reception">
                            <option value="0">No</option>
                            <option value="1">Yes</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Add-ons Section -->
            <div class="form-section">
                <h2>Additional Services</h2>
                <div class="addons-grid" id="addonsContainer">
                    <!-- Add-ons will be populated by JavaScript -->
                </div>
            </div>

            <!-- Additional Cleaners -->
            <div class="form-section">
                <h2>Additional Requirements</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="additionalCleaners">Additional Cleaners:</label>
                        <input type="number" id="additionalCleaners" min="0" value="0">
                    </div>
                </div>
            </div>

            <!-- Price Display -->
            <div class="price-section">
                <h2>Estimated Price</h2>
                <div class="price-box">
                    <span id="totalPrice">₦0</span>
                </div>
                <div class="price-breakdown" id="priceBreakdown">
                    <!-- Breakdown will be shown here -->
                </div>
            </div>

            <!-- Success Message -->
            <div class="success-message" id="successMessage">
                <i class="fas fa-check-circle"></i> Quote submitted successfully! We'll contact you shortly.
            </div>

            <!-- Submit Button -->
            <button type="button" id="submitBtn" class="submit-btn">
                <i class="fas fa-paper-plane"></i> Get Quote & Submit
            </button>
        </form>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <h3>Submitting your quote...</h3>
        </div>
    </div>

    <script>
        // Pricing data from your PDFs
        const pricing = {
            residential: {
                standard: {
                    base: 9000,
                    rooms: {
                        bedroom: 1300,
                        bathroom: 1000,
                        living: 1200,
                        kitchen: 1500,
                        guestToilet: 800,
                        office: 800,
                        study: 800,
                        laundry: 800,
                        store: 800
                    }
                },
                deep: {
                    base: 41400,
                    rooms: {
                        bedroom: 4400,
                        bathroom: 4100,
                        living: 4200,
                        kitchen: 4600,
                        guestToilet: 2800,
                        office: 4400,
                        study: 5600,
                        laundry: 5600,
                        store: 5700
                    }
                },
                movein: {
                    base: 51000,
                    rooms: {
                        bedroom: 5000,
                        bathroom: 4800,
                        living: 5000,
                        kitchen: 5200,
                        guestToilet: 3300,
                        office: 5800,
                        study: 7800,
                        laundry: 7300,
                        store: 6800
                    }
                }
            },
            commercial: {
                small: {
                    base: 45000,
                    rooms: {
                        office: 10000,
                        restroom: 19000,
                        reception: 16000
                    }
                },
                standard: {
                    base: 96000,
                    rooms: {
                        office: 27000,
                        restroom: 36000,
                        reception: 33000
                    }
                },
                large: {
                    base: 150000,
                    rooms: {
                        office: 45000,
                        restroom: 54000,
                        reception: 51000
                    }
                },
                onetime: {
                    base: 249000,
                    rooms: {
                        office: 78000,
                        restroom: 87000,
                        reception: 84000
                    }
                }
            }
        };

        // Add-ons pricing
        const addons = {
            residential: [
                { name: "Balcony Cleaning", price: 1000, time: "42 mins" },
                { name: "Window Cleaning", price: 1400, time: "1 hour" },
                { name: "Fridge Cleaning", price: 700, time: "30 mins" },
                { name: "Fan Cleaning", price: 700, time: "30 mins" },
                { name: "Oven Cleaning", price: 700, time: "30 mins" },
                { name: "Kitchen Cabinet", price: 1000, time: "42 mins" },
                { name: "Wall Cleaning", price: 2000, time: "1 hr 24 mins" },
                { name: "Ironing", price: 5600, time: "2 hours" },
                { name: "Laundry", price: 2800, time: "2 hours" },
                { name: "Wardrobe Organization", price: 4200, time: "3 hours" },
                { name: "Compound Cleaning", price: 2800, time: "1 hour" }
            ],
            commercial: [
                { name: "Kitchenette", price: 5000, time: "1 hour" },
                { name: "Canteen", price: 14500, time: "3 hours" },
                { name: "Lounge", price: 10000, time: "1 hour" },
                { name: "Study/Library", price: 8000, time: "1 hour" },
                { name: "Laundry Room", price: 10000, time: "1 hour" },
                { name: "Store", price: 8000, time: "1 hour" },
                { name: "Balcony Cleaning", price: 3000, time: "42 mins" },
                { name: "Window Cleaning", price: 4500, time: "1 hour" },
                { name: "Fridge Cleaning", price: 1500, time: "30 mins" },
                { name: "Fan Cleaning", price: 1500, time: "30 mins" },
                { name: "Kitchen Cabinet", price: 2000, time: "42 mins" },
                { name: "Wall Cleaning", price: 9500, time: "1 hr 30 mins" },
                { name: "Compound Cleaning", price: 5800, time: "1 hour" }
            ]
        };

        // Frequency discounts
        const frequencyDiscounts = {
            onetime: 0,
            twicemonth: 3,
            onceweek: 5,
            twiceweek: 7,
            threeweek: 8,
            fiveweek: 10,
            everyday: 16
        };

        // Additional cleaner costs
        const additionalCleanerCost = {
            residential: 5000,
            commercial: {
                small: 10000,
                standard: 22500,
                large: 35000,
                onetime: 40000
            }
        };

        // Google Apps Script Web App URL (UPDATE THIS WITH YOUR URL)
        const GOOGLE_SCRIPT_URL = 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE';

        // DOM Elements
        const propertyTypeRadios = document.querySelectorAll('input[name="propertyType"]');
        const residentialPackages = document.getElementById('residentialPackages');
        const commercialPackages = document.getElementById('commercialPackages');
        const residentialDetails = document.getElementById('residentialDetails');
        const commercialDetails = document.getElementById('commercialDetails');
        const addonsContainer = document.getElementById('addonsContainer');
        const frequencySelect = document.getElementById('frequency');
        const totalPriceSpan = document.getElementById('totalPrice');
        const priceBreakdown = document.getElementById('priceBreakdown');
        const submitBtn = document.getElementById('submitBtn');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const successMessage = document.getElementById('successMessage');

        // Current state
        let currentPropertyType = 'residential';
        let currentResidentialPackage = 'standard';
        let currentCommercialPackage = 'small';

        // Initialize the form
        document.addEventListener('DOMContentLoaded', function() {
            updateAddons();
            calculatePrice();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Property type change
            propertyTypeRadios.forEach(radio => {
                radio.addEventListener('change', function(e) {
                    currentPropertyType = e.target.value;
                    if (currentPropertyType === 'residential') {
                        residentialPackages.style.display = 'block';
                        commercialPackages.style.display = 'none';
                        residentialDetails.style.display = 'block';
                        commercialDetails.style.display = 'none';
                    } else {
                        residentialPackages.style.display = 'none';
                        commercialPackages.style.display = 'block';
                        residentialDetails.style.display = 'none';
                        commercialDetails.style.display = 'block';
                    }
                    updateAddons();
                    calculatePrice();
                });
            });

            // Package selection
            document.querySelectorAll('input[name="residentialPackage"]').forEach(radio => {
                radio.addEventListener('change', function(e) {
                    currentResidentialPackage = e.target.value;
                    calculatePrice();
                });
            });

            document.querySelectorAll('input[name="commercialPackage"]').forEach(radio => {
                radio.addEventListener('change', function(e) {
                    currentCommercialPackage = e.target.value;
                    calculatePrice();
                });
            });

            // Input changes
            const inputs = ['bedrooms', 'bathrooms', 'livingrooms', 'kitchens', 
                            'offices', 'restrooms', 'reception', 'additionalCleaners'];
            inputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', calculatePrice);
                }
            });

            frequencySelect.addEventListener('change', calculatePrice);

            // Submit button
            submitBtn.addEventListener('click', submitForm);
        }

        function updateAddons() {
            const addonsList = currentPropertyType === 'residential' ? addons.residential : addons.commercial;
            let html = '';
            
            addonsList.forEach((addon) => {
                html += `
                    <label class="addon-item">
                        <input type="checkbox" class="addon-checkbox" data-price="${addon.price}" data-name="${addon.name}">
                        <span class="addon-name">${addon.name}</span>
                        <span class="addon-price">₦${addon.price.toLocaleString()}</span>
                        <small>(${addon.time})</small>
                    </label>
                `;
            });
            
            addonsContainer.innerHTML = html;
            
            // Add event listeners to new checkboxes
            document.querySelectorAll('.addon-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', calculatePrice);
            });
        }

        function calculatePrice() {
            let basePrice = 0;
            let roomCosts = 0;
            let breakdown = [];
            
            // Get base package price
            if (currentPropertyType === 'residential') {
                const pkg = pricing.residential[currentResidentialPackage];
                basePrice = pkg.base;
                
                // Add room costs
                const bedrooms = parseInt(document.getElementById('bedrooms')?.value) || 0;
                const bathrooms = parseInt(document.getElementById('bathrooms')?.value) || 0;
                const livingrooms = parseInt(document.getElementById('livingrooms')?.value) || 0;
                const kitchens = parseInt(document.getElementById('kitchens')?.value) || 0;
                
                roomCosts = (bedrooms * pkg.rooms.bedroom) +
                            (bathrooms * pkg.rooms.bathroom) +
                            (livingrooms * pkg.rooms.living) +
                            (kitchens * pkg.rooms.kitchen);
                
                if (bedrooms > 0) breakdown.push({ item: `Bedrooms (${bedrooms})`, cost: bedrooms * pkg.rooms.bedroom });
                if (bathrooms > 0) breakdown.push({ item: `Bathrooms (${bathrooms})`, cost: bathrooms * pkg.rooms.bathroom });
                if (livingrooms > 0) breakdown.push({ item: `Living Rooms (${livingrooms})`, cost: livingrooms * pkg.rooms.living });
                if (kitchens > 0) breakdown.push({ item: `Kitchens (${kitchens})`, cost: kitchens * pkg.rooms.kitchen });
                
            } else {
                const pkg = pricing.commercial[currentCommercialPackage];
                basePrice = pkg.base;
                
                // Add room costs
                const offices = parseInt(document.getElementById('offices')?.value) || 0;
                const restrooms = parseInt(document.getElementById('restrooms')?.value) || 0;
                const reception = parseInt(document.getElementById('reception')?.value) || 0;
                
                roomCosts = (offices * pkg.rooms.office) +
                            (restrooms * pkg.rooms.restroom) +
                            (reception * (pkg.rooms.reception || 0));
                
                if (offices > 0) breakdown.push({ item: `Offices (${offices})`, cost: offices * pkg.rooms.office });
                if (restrooms > 0) breakdown.push({ item: `Restrooms (${restrooms})`, cost: restrooms * pkg.rooms.restroom });
                if (reception > 0) breakdown.push({ item: 'Reception', cost: pkg.rooms.reception });
            }
            
            // Add add-ons
            let addonsTotal = 0;
            document.querySelectorAll('.addon-checkbox:checked').forEach(checkbox => {
                const price = parseFloat(checkbox.dataset.price);
                addonsTotal += price;
                breakdown.push({ item: checkbox.dataset.name, cost: price });
            });
            
            // Add additional cleaners
            const additionalCleaners = parseInt(document.getElementById('additionalCleaners')?.value) || 0;
            let cleanerCost = 0;
            
            if (additionalCleaners > 0) {
                if (currentPropertyType === 'residential') {
                    cleanerCost = additionalCleaners * additionalCleanerCost.residential;
                } else {
                    cleanerCost = additionalCleaners * additionalCleanerCost.commercial[currentCommercialPackage];
                }
                breakdown.push({ item: `Additional Cleaners (${additionalCleaners})`, cost: cleanerCost });
            }
            
            // Calculate subtotal
            let subtotal = basePrice + roomCosts + addonsTotal + cleanerCost;
            breakdown.push({ item: 'Package Base', cost: basePrice });
            
            // Apply frequency discount
            const frequency = frequencySelect.value;
            const discountPercent = frequencyDiscounts[frequency];
            const discountAmount = (subtotal * discountPercent) / 100;
            const total = subtotal - discountAmount;
            
            if (discountPercent > 0) {
                breakdown.push({ item: `Discount (${discountPercent}%)`, cost: -discountAmount });
            }
            
            // Update display
            totalPriceSpan.textContent = `₦${Math.round(total).toLocaleString()}`;
            
            // Show breakdown
            let breakdownHtml = '<h3>Price Breakdown</h3>';
            breakdown.forEach(item => {
                breakdownHtml += `
                    <div class="breakdown-item">
                        <span>${item.item}</span>
                        <span>₦${Math.abs(item.cost).toLocaleString()}${item.cost < 0 ? ' discount' : ''}</span>
                    </div>
                `;
            });
            breakdownHtml += `
                <div class="breakdown-item total">
                    <span>Total</span>
                    <span>₦${Math.round(total).toLocaleString()}</span>
                </div>
            `;
            
            priceBreakdown.innerHTML = breakdownHtml;
            
            return total;
        }

        function validateForm() {
            let isValid = true;
            
            // Clear previous error messages
            document.querySelectorAll('.error-message').forEach(msg => {
                msg.style.display = 'none';
            });
            
            // Validate full name
            const fullName = document.getElementById('fullName').value.trim();
            if (!fullName) {
                document.getElementById('nameError').style.display = 'block';
                isValid = false;
            }
            
            // Validate email
            const email = document.getElementById('email').value.trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email || !emailRegex.test(email)) {
                document.getElementById('emailError').style.display = 'block';
                isValid = false;
            }
            
            // Validate phone
            const phone = document.getElementById('phone').value.trim();
            if (!phone) {
                document.getElementById('phoneError').style.display = 'block';
                isValid = false;
            }
            
            // Validate address
            const address = document.getElementById('address').value.trim();
            if (!address) {
                document.getElementById('addressError').style.display = 'block';
                isValid = false;
            }
            
            return isValid;
        }

        function submitForm() {
            if (!validateForm()) {
                return;
            }
            
            // Show loading overlay
            loadingOverlay.style.display = 'flex';
            
            // Get form data
            const total = calculatePrice();
            
            // Collect selected addons
            const selectedAddons = [];
            document.querySelectorAll('.addon-checkbox:checked').forEach(checkbox => {
                selectedAddons.push(checkbox.dataset.name);
            });
            
            // Prepare data for Google Sheets
            const formData = {
                timestamp: new Date().toLocaleString('en-NG', { timeZone: 'Africa/Lagos' }),
                fullName: document.getElementById('fullName').value.trim(),
                email: document.getElementById('email').value.trim(),
                phone: document.getElementById('phone').value.trim(),
                address: document.getElementById('address').value.trim(),
                propertyType: currentPropertyType === 'residential' ? 'Residential' : 'Commercial',
                package: currentPropertyType === 'residential' ? 
                    getResidentialPackageName(currentResidentialPackage) : 
                    getCommercialPackageName(currentCommercialPackage),
                frequency: frequencySelect.options[frequencySelect.selectedIndex].text,
                rooms: getRoomDetails(),
                addons: selectedAddons.join(', ') || 'None',
                additionalCleaners: document.getElementById('additionalCleaners')?.value || '0',
                totalAmount: `₦${Math.round(total).toLocaleString()}`,
                rawTotal: Math.round(total)
            };
            
            // Simulate API call (replace with actual Google Apps Script URL)
            setTimeout(() => {
                loadingOverlay.style.display = 'none';
                successMessage.style.display = 'block';
                
                // Scroll to success message
                successMessage.scrollIntoView({ behavior: 'smooth' });
                
                // Reset form after 3 seconds
                setTimeout(() => {
                    successMessage.style.display = 'none';
                    // Optional: redirect to thank you page or reset form
                    // window.location.href = 'thank-you.html';
                }, 3000);
                
                console.log('Form data:', formData); // For testing
            }, 1500);
            
            // Uncomment this when you have your Google Apps Script URL
            /*
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(formData)
            })
            .then(response => {
                loadingOverlay.style.display = 'none';
                successMessage.style.display = 'block';
                
                // Redirect to thank you page after 2 seconds
                setTimeout(() => {
                    window.location.href = `thank-you.html?name=${encodeURIComponent(formData.fullName)}&type=${formData.propertyType}&package=${formData.package}&price=${formData.rawTotal}`;
                }, 2000);
            })
            .catch(error => {
                loadingOverlay.style.display = 'none';
                alert('There was an error submitting your quote. Please try again.');
                console.error('Error:', error);
            });
            */
        }

        function getResidentialPackageName(pkg) {
            const names = {
                standard: 'Standard Cleaning',
                deep: 'Deep Cleaning',
                movein: 'Move-In Cleaning'
            };
            return names[pkg] || pkg;
        }

        function getCommercialPackageName(pkg) {
            const names = {
                small: 'Small Office',
                standard: 'Standard Office',
                large: 'Large Office',
                onetime: 'One-Time Deep Clean'
            };
            return names[pkg] || pkg;
        }

        function getRoomDetails() {
            if (currentPropertyType === 'residential') {
                return `Bedrooms: ${document.getElementById('bedrooms')?.value || 0}, ` +
                       `Bathrooms: ${document.getElementById('bathrooms')?.value || 0}, ` +
                       `Living Rooms: ${document.getElementById('livingrooms')?.value || 0}, ` +
                       `Kitchens: ${document.getElementById('kitchens')?.value || 0}`;
            } else {
                return `Offices: ${document.getElementById('offices')?.value || 0}, ` +
                       `Restrooms: ${document.getElementById('restrooms')?.value || 0}, ` +
                       `Reception: ${document.getElementById('reception')?.value === '1' ? 'Yes' : 'No'}`;
            }
        }
    </script>
</body>
</html>